{# templates/adminAction.html.twig #}
{% include 'header.html.twig' with {'genres':genres, 'userPfp': userPfp} %}
{% block body %}
    <div>
    {% if error is defined %}
        {{ error }} <br>
    {% endif %}
    {% if deleted is defined %}
        {{ deleted }} <br>
    {% endif %}
        {% if response == 1 %}
        {# users #}
            {% if users|length > 0 %}
                <table>
                    <tr>
                        <th>Username</th><th>Email</th><th>Verified</th><th>About</th><th>Role</th><th>Change</th><th>Delete</th>
                    </tr>
                {% for user in users %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>
                            {% if user.confCod == 0 %}
                                Verified
                            {% else %}
                                Not verified
                            {% endif %}
                        </td>
                        <td>{{ user.about }}</td>
                        <td>
                            {% if user.role == 0 %}
                                User
                            {% else %}
                                Admin
                            {% endif %}
                        </td>
                        <td><a href="{{ path('changeUser', {'id': user.userId}) }}">Change</a></td>
                        <td><form action="{{ path('deleteUser', {'id': user.userId })}}" method="GET">
                                <button type="submit" onclick="return confirm('Are you sure you want to delete this user?')">Delete</button>
                            </form>
                        </td>
                       
                    </tr>
                {% endfor %}
                </table>
            {% endif %}
        {% elseif response == 2 %}
            {# stories #}
            {% if stories|length > 0 %}
                <table>
                    <tr>
                        <th>Title</th><th>Author</th><th>Moderate comments</th><th>Delete story</th>
                    </tr>
                {% for story in stories %}
                    <tr>
                        <td>{{ story.storyTitle }}</td>
                        <td>{{ story.user.username }}</td>
                        <td>
                            <form action="{{ path('moderateComments', {'id': story.storyID })}}" method="GET">
                                <button>Moderate comments</button>
                            </form>
                        </td>
                        <td>
                            <form action="{{ path('deleteStory', {'id': story.storyID })}}" method="GET">
                                <button type="submit" onclick="return confirm('Are you sure you want to delete this story?')">Delete story</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </table>
            {% endif %}
        {% elseif response == 3 %}
            {# genres #}
            {% if genres|length > 0 %}
            Genres:
                <ul>
                    {% for genre in genres %}
                        <li>{{ genre.name }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}